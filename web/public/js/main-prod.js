/**
 * @license
 * Lo-Dash 1.2.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/

(function(e){function H(n){function yt(e){return e&&typeof e=="object"&&!_t(e)&&et.call(e,"__wrapped__")?e:new Ct(e)}function wt(e){var t=e.length,n=t>=a;if(n){var r={},i=-1;while(++i<t){var s=u+e[i];(r[s]||(r[s]=[])).push(e[i])}}return function(t){if(n){var i=u+t;return r[i]&&Rn(r[i],t)>-1}return Rn(e,t)>-1}}function Et(e){return e.charCodeAt(0)}function St(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function xt(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=dt.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){kt.prototype=e.prototype,f=new kt,kt.prototype=null;var l=e.apply(f,r);return en(l)?l:f}return e.apply(f,r)}var i=Zt(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new W;t=e}return a}function Tt(e){return"\\"+P[e]}function Nt(e){return Ht[e]}function Ct(e){this.__wrapped__=e}function kt(){}function Lt(e){var t=!1;if(!e||it.call(e)!=A)return t;var n=e.constructor;return(Zt(n)?n instanceof n:!0)?(Ut(e,function(e,n){t=n}),t===!1||et.call(e,t)):t}function At(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,s=n-t||0,o=i(s<0?0:s);while(++r<s)o[r]=e[t+r];return o}function Ot(e){return Bt[e]}function Mt(e){return it.call(e)==x}function Ft(e,n,r,i,s,o){var u=e;typeof n=="function"&&(i=r,r=n,n=!1);if(typeof r=="function"){r=typeof i=="undefined"?r:yt.createCallback(r,i,1),u=r(u);if(typeof u!="undefined")return u;u=e}var a=en(u);if(a){var f=it.call(u);if(!_[f])return u;var l=_t(u)}if(!a||!n)return a?l?At(u):jt({},u):u;var c=gt[f];switch(f){case N:case C:return new c(+u);case L:case M:return new c(u);case O:return c(u.source,d.exec(u))}s||(s=[]),o||(o=[]);var h=s.length;while(h--)if(s[h]==e)return o[h];return u=l?c(u.length):{},l&&(et.call(e,"index")&&(u.index=e.index),et.call(e,"input")&&(u.input=e.input)),s.push(e),o.push(u),(l?wn:zt)(e,function(e,i){u[i]=Ft(e,n,r,t,s,o)}),u}function It(e,t,n){return Ft(e,!0,t,n)}function Rt(e,t,n){var r;return t=yt.createCallback(t,n),zt(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Wt(e){var t=[];return Ut(e,function(e,n){Zt(e)&&t.push(n)}),t.sort()}function Xt(e,t){return e?et.call(e,t):!1}function Vt(e){var t=-1,n=Pt(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function $t(e){return e===!0||e===!1||it.call(e)==N}function Jt(e){return e?typeof e=="object"&&it.call(e)==C:!1}function Kt(e){return e?e.nodeType===1:!1}function Qt(e){var t=!0;if(!e)return t;var n=it.call(e),r=e.length;return n==T||n==M||n==x||n==A&&typeof r=="number"&&Zt(e.splice)?!r:(zt(e,function(){return t=!1}),t)}function Gt(e,t,n,r,i,s){var u=n===o;if(typeof n=="function"&&!u){n=yt.createCallback(n,r,2);var a=n(e,t);if(typeof a!="undefined")return!!a}if(e===t)return e!==0||1/e==1/t;var f=typeof e,l=typeof t;if(e===e&&(!e||f!="function"&&f!="object")&&(!t||l!="function"&&l!="object"))return!1;if(e==null||t==null)return e===t;var c=it.call(e),h=it.call(t);c==x&&(c=A),h==x&&(h=A);if(c!=h)return!1;switch(c){case N:case C:return+e==+t;case L:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case O:case M:return e==z(t)}var p=c==T;if(!p){if(et.call(e,"__wrapped__ ")||et.call(t,"__wrapped__"))return Gt(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(c!=A)return!1;var d=e.constructor,v=t.constructor;if(d!=v&&!(Zt(d)&&d instanceof d&&Zt(v)&&v instanceof v))return!1}i||(i=[]),s||(s=[]);var m=i.length;while(m--)if(i[m]==e)return s[m]==t;var g=0;a=!0,i.push(e),s.push(t);if(p){m=e.length,g=t.length,a=g==e.length;if(!a&&!u)return a;while(g--){var y=m,b=t[g];if(u){while(y--)if(a=Gt(e[y],b,n,r,i,s))break}else if(!(a=Gt(e[g],b,n,r,i,s)))break}return a}return Ut(t,function(t,o,u){if(et.call(u,o))return g++,a=et.call(e,o)&&Gt(e[o],t,n,r,i,s)}),a&&!u&&Ut(e,function(e,t,n){if(et.call(n,t))return a=--g>-1}),a}function Yt(e){return ut(e)&&!at(parseFloat(e))}function Zt(e){return typeof e=="function"}function en(e){return e?D[typeof e]:!1}function tn(e){return rn(e)&&e!=+e}function nn(e){return e===null}function rn(e){return typeof e=="number"||it.call(e)==L}function on(e){return e?typeof e=="object"&&it.call(e)==O:!1}function un(e){return typeof e=="string"||it.call(e)==M}function an(e){return typeof e=="undefined"}function fn(e,t,n){var r=arguments,i=0,s=2;if(!en(e))return e;if(n===o)var u=r[3],a=r[4],f=r[5];else a=[],f=[],typeof n!="number"&&(s=r.length),s>3&&typeof r[s-2]=="function"?u=yt.createCallback(r[--s-1],r[s--],2):s>2&&typeof r[s-1]=="function"&&(u=r[--s]);while(++i<s)(_t(r[i])?wn:zt)(r[i],function(t,n){var r,i,s=t,l=e[n];if(t&&((i=_t(t))||sn(t))){var c=a.length;while(c--)if(r=a[c]==t){l=f[c];break}if(!r){var h;if(u){s=u(l,t);if(h=typeof s!="undefined")l=s}h||(l=i?_t(l)?l:[]:sn(l)?l:{}),a.push(t),f.push(l),h||(l=fn(l,t,o,u,a,f))}}else u&&(s=u(l,t),typeof s=="undefined"&&(s=t)),typeof s!="undefined"&&(l=s);e[n]=l});return e}function ln(e,t,n){var r=typeof t=="function",i={};if(r)t=yt.createCallback(t,n);else var s=G.apply(X,dt.call(arguments,1));return Ut(e,function(e,n,o){if(r?!t(e,n,o):Rn(s,n)<0)i[n]=e}),i}function cn(e){var t=-1,n=Pt(e),r=n.length,s=i(r);while(++t<r){var o=n[t];s[t]=[o,e[o]]}return s}function hn(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=G.apply(X,dt.call(arguments,1)),o=en(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=yt.createCallback(t,n),Ut(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function pn(e){var t=-1,n=Pt(e),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function dn(e){var t=-1,n=G.apply(X,dt.call(arguments,1)),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function vn(e,t,n){var r=-1,i=e?e.length:0,s=!1;return n=(n<0?lt(0,i+n):n)||0,typeof i=="number"?s=(un(e)?e.indexOf(t,n):Rn(e,t,n))>-1:zt(e,function(e){if(++r>=n)return!(s=e===t)}),s}function mn(e,t,n){var r={};return t=yt.createCallback(t,n),wn(e,function(e,n,i){n=z(t(e,n,i)),et.call(r,n)?r[n]++:r[n]=1}),r}function gn(e,t,n){var r=!0;t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(!(r=!!t(e[i],i,e)))break}else zt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function yn(e,t,n){var r=[];t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number")while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}else zt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function bn(e,t,n){t=yt.createCallback(t,n);var r=-1,i=e?e.length:0;if(typeof i!="number"){var o;return zt(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}while(++r<i){var s=e[r];if(t(s,r,e))return s}}function wn(e,t,n){var r=-1,i=e?e.length:0;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);if(typeof i=="number"){while(++r<i)if(t(e[r],r,e)===!1)break}else zt(e,t);return e}function En(e,t,n){var r={};return t=yt.createCallback(t,n),wn(e,function(e,n,i){n=z(t(e,n,i)),(et.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Sn(e,t){var n=dt.call(arguments,2),r=-1,s=typeof t=="function",o=e?e.length:0,u=i(typeof o=="number"?o:0);return wn(e,function(e){u[++r]=(s?t:e[t]).apply(e,n)}),u}function xn(e,t,n){var r=-1,s=e?e.length:0;t=yt.createCallback(t,n);if(typeof s=="number"){var o=i(s);while(++r<s)o[r]=t(e[r],r,e)}else o=[],zt(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Tn(e,t,n){var r=-Infinity,i=r;if(!t&&_t(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=!t&&un(e)?Et:yt.createCallback(t,n),wn(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Nn(e,t,n){var r=Infinity,i=r;if(!t&&_t(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=!t&&un(e)?Et:yt.createCallback(t,n),wn(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Cn(e,t){var n=-1,r=e?e.length:0;if(typeof r=="number"){var s=i(r);while(++n<r)s[n]=e[n][t]}return s||xn(e,t)}function kn(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=yt.createCallback(t,r,4);var s=-1,o=e.length;if(typeof o=="number"){i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else zt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Ln(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=Pt(e);s=u.length}return t=yt.createCallback(t,r,4),wn(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function An(e,t,n){return t=yt.createCallback(t,n),yn(e,function(e,n,r){return!t(e,n,r)})}function On(e){var t=-1,n=e?e.length:0,r=i(typeof n=="number"?n:0);return wn(e,function(e){var n=Y(pt()*(++t+1));r[t]=r[n],r[n]=e}),r}function Mn(e){var t=e?e.length:0;return typeof t=="number"?t:Pt(e).length}function _n(e,t,n){var r;t=yt.createCallback(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(r=t(e[i],i,e))break}else zt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Dn(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=yt.createCallback(t,n),wn(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),s=o.length,o.sort(St);while(s--)o[s]=o[s].value;return o}function Pn(e){return e&&typeof e.length=="number"?At(e):pn(e)}function Bn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function jn(e){var t=-1,n=e?e.length:0,r=G.apply(X,dt.call(arguments,1)),i=wt(r),s=[];while(++t<n){var o=e[t];i(o)||s.push(o)}return s}function Fn(e,t,n){var r=-1,i=e?e.length:0;t=yt.createCallback(t,n);while(++r<i)if(t(e[r],r,e))return r;return-1}function In(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=yt.createCallback(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return At(e,0,ct(lt(0,r),i))}}function qn(e,t,n,r){var i=-1,s=e?e.length:0,o=[];typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),n!=null&&(n=yt.createCallback(n,r));while(++i<s){var u=e[i];n&&(u=n(u,i,e)),_t(u)?tt.apply(o,t?u:qn(u)):o.push(u)}return o}function Rn(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(n<0?lt(0,i+n):n||0)-1;else if(n)return r=Jn(e,t),e[r]===t?r:-1;while(++r<i)if(e[r]===t)return r;return-1}function Un(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=yt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return At(e,0,ct(lt(0,i-r),i))}function zn(e){var t=arguments,n=t.length,r={0:{}},i=-1,s=e?e.length:0,o=s>=a,f=[],l=f;e:while(++i<s){var c=e[i];if(o)var h=u+c,p=r[0][h]?!(l=r[0][h]):l=r[0][h]=[];if(p||Rn(l,c)<0){o&&l.push(c);var d=n;while(--d)if(!(r[d]||(r[d]=wt(t[d])))(c))continue e;f.push(c)}}return f}function Wn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=yt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return At(e,lt(0,i-r))}}function Xn(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?lt(0,r+n):ct(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Vn(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,s=lt(0,K((t-e)/n)),o=i(s);while(++r<s)o[r]=e,e+=n;return o}function $n(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=yt.createCallback(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:lt(0,t);return At(e,r)}function Jn(e,t,n,r){var i=0,s=e?e.length:i;n=n?yt.createCallback(n,r,1):gr,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function Kn(e){return _t(e)||(arguments[0]=e?dt.call(e):X),Qn(G.apply(X,arguments))}function Qn(e,t,n,r){var i=-1,s=e?e.length:0,o=[],f=o;typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1);var l=!t&&s>=a;if(l)var c={};n!=null&&(f=[],n=yt.createCallback(n,r));while(++i<s){var h=e[i],p=n?n(h,i,e):h;if(l)var d=u+p,v=c[d]?!(f=c[d]):f=c[d]=[];if(t?!i||f[f.length-1]!==p:v||Rn(f,p)<0)(n||l)&&f.push(p),o.push(h)}return o}function Gn(e){var t=-1,n=e?e.length:0,r=n?Tn(Cn(e,"length")):0,s=i(r);while(++t<n){var o=-1,u=e[t];while(++o<r)(s[o]||(s[o]=i(n)))[t]=u[o]}return s}function Yn(e){return jn(e,dt.call(arguments,1))}function Zn(e){var t=-1,n=e?Tn(Cn(arguments,"length")):0,r=i(n);while(++t<n)r[t]=Cn(arguments,t);return r}function er(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function tr(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function nr(e,t){return bt.fastBind||st&&arguments.length>2?st.call.apply(st,arguments):xt(e,t,dt.call(arguments,2))}function rr(e){var t=arguments.length>1?G.apply(X,dt.call(arguments,1)):Wt(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=nr(e[i],e)}return e}function ir(e,t){return xt(e,t,dt.call(arguments,2),o)}function sr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function or(e,t,n){if(e==null)return gr;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=Pt(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=Gt(t[i[n]],e[i[n]],o)))break;return r}}return typeof t!="undefined"?n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}:e}function ur(e,t,n){function f(){i=u=null,a&&(s=e.apply(o,r))}var r,i,s,o,u,a=!0;if(n===!0){var l=!0;a=!1}else n&&D[typeof n]&&(l=n.leading,a="trailing"in n?n.trailing:a);return function(){return r=arguments,o=this,Q(u),!i&&l?(i=!0,s=e.apply(o,r)):u=rt(f,t),s}}function ar(e){var n=dt.call(arguments,1);return rt(function(){e.apply(t,n)},1)}function fr(e,n){var r=dt.call(arguments,2);return rt(function(){e.apply(t,r)},n)}function lr(e,t){var n={};return function(){var r=u+(t?t.apply(this,arguments):arguments[0]);return et.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function cr(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function hr(e){return xt(e,dt.call(arguments,1))}function pr(e){return xt(e,dt.call(arguments,1),null,o)}function dr(e,t,n){function l(){o=null,f&&(u=new j,i=e.apply(s,r))}var r,i,s,o,u=0,a=!0,f=!0;return n===!1?a=!1:n&&D[typeof n]&&(a="leading"in n?n.leading:a,f="trailing"in n?n.trailing:f),function(){var n=new j;!o&&!a&&(u=n);var f=t-(n-u);return r=arguments,s=this,f<=0?(Q(o),o=null,u=n,i=e.apply(s,r)):o||(o=rt(l,f)),i}}function vr(e,t){return function(){var n=[e];return tt.apply(n,arguments),t.apply(this,n)}}function mr(e){return e==null?"":z(e).replace(b,Nt)}function gr(e){return e}function yr(e){wn(Wt(e),function(t){var n=yt[t]=e[t];yt.prototype[t]=function(){var e=this.__wrapped__,t=[e];tt.apply(t,arguments);var r=n.apply(yt,t);return e&&typeof e=="object"&&e==r?this:new Ct(r)}})}function br(){return n._=$,this}function Er(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null&&(t=e,e=0),e+Y(pt()*((+t||0)-e+1))}function Sr(e,n){var r=e?e[n]:t;return Zt(r)?e[n]():r}function xr(e,n,r){var i=yt.templateSettings;e||(e=""),r=qt({},r,i);var s=qt({},r.imports,i.imports),o=Pt(s),u=pn(s),a,h=0,d=r.interpolate||y,m="__p += '",g=U((r.escape||y).source+"|"+d.source+"|"+(d===v?p:y).source+"|"+(r.evaluate||y).source+"|$","g");e.replace(g,function(t,n,r,i,s,o){return r||(r=i),m+=e.slice(h,o).replace(w,Tt),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),m+="';\n";var b=r.variable,E=b;E||(b="obj",m="with ("+b+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+b+") {\n"+(E?"":b+" || ("+b+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var x="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var T=F(o,"return "+m+x).apply(t,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Tr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,s=i(e);t=yt.createCallback(t,n,1);while(++r<e)s[r]=t(r);return s}function Nr(e){return e==null?"":z(e).replace(h,Ot)}function Cr(e){var t=++s;return z(e==null?"":e)+t}function kr(e,t){return t(e),e}function Lr(){return z(this.__wrapped__)}function Ar(){return this.__wrapped__}n=n?B.defaults(e.Object(),n,B.pick(e,E)):e;var i=n.Array,k=n.Boolean,j=n.Date,F=n.Function,I=n.Math,q=n.Number,R=n.Object,U=n.RegExp,z=n.String,W=n.TypeError,X=i(),V=R(),$=n._,J=U("^"+z(V.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),K=I.ceil,Q=n.clearTimeout,G=X.concat,Y=I.floor,Z=J.test(Z=R.getPrototypeOf)&&Z,et=V.hasOwnProperty,tt=X.push,nt=n.setImmediate,rt=n.setTimeout,it=V.toString,st=J.test(st=it.bind)&&st,ot=J.test(ot=i.isArray)&&ot,ut=n.isFinite,at=n.isNaN,ft=J.test(ft=R.keys)&&ft,lt=I.max,ct=I.min,ht=n.parseInt,pt=I.random,dt=X.slice,vt=J.test(n.attachEvent),mt=st&&!/\n|true/.test(st+vt),gt={};gt[T]=i,gt[N]=k,gt[C]=j,gt[A]=R,gt[L]=q,gt[O]=U,gt[M]=z;var bt=yt.support={};bt.fastBind=st&&!mt,yt.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:yt}},Ct.prototype=yt.prototype;var _t=ot,Dt=function(e){var t,n=e,r=[];if(!n)return r;if(!D[typeof e])return r;for(t in n)et.call(n,t)&&r.push(t);return r},Pt=ft?function(e){return en(e)?ft(e):[]}:Dt,Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bt=Vt(Ht),jt=function(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;if(a>3&&typeof o[a-2]=="function")var f=yt.createCallback(o[--a-1],o[a--],2);else a>2&&typeof o[a-1]=="function"&&(f=o[--a]);while(++u<a){i=o[u];if(i&&D[typeof i]){var l=i.length;r=-1;if(_t(i))while(++r<l)s[r]=f?f(s[r],i[r]):i[r];else{var c=-1,h=D[typeof i]?Pt(i):[],l=h.length;while(++c<l)r=h[c],s[r]=f?f(s[r],i[r]):i[r]}}}return s},qt=function(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;while(++u<a){i=o[u];if(i&&D[typeof i]){var f=i.length;r=-1;if(_t(i))while(++r<f)typeof s[r]=="undefined"&&(s[r]=i[r]);else{var l=-1,c=D[typeof i]?Pt(i):[],f=c.length;while(++l<f)r=c[l],typeof s[r]=="undefined"&&(s[r]=i[r])}}}return s},Ut=function(e,t,n){var r,i=e,s=i;if(!i)return s;if(!D[typeof i])return s;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);for(r in i)if(t(i[r],r,e)===!1)return s;return s},zt=function(e,t,n){var r,i=e,s=i;if(!i)return s;if(!D[typeof i])return s;t=t&&typeof n=="undefined"?t:yt.createCallback(t,n);var o=-1,u=D[typeof i]?Pt(i):[],a=u.length;while(++o<a){r=u[o];if(t(i[r],r,e)===!1)return s}return s},sn=function(e){if(!e||it.call(e)!=A)return!1;var t=e.valueOf,n=typeof t=="function"&&(n=Z(t))&&Z(n);return n?e==n||Z(e)==n:Lt(e)},Hn=yn;mt&&r&&typeof nt=="function"&&(ar=nr(nt,n));var wr=ht(m+"08")==8?ht:function(e,t){return ht(un(e)?e.replace(g,""):e,t||0)};return yt.after=tr,yt.assign=jt,yt.at=dn,yt.bind=nr,yt.bindAll=rr,yt.bindKey=ir,yt.compact=Bn,yt.compose=sr,yt.countBy=mn,yt.createCallback=or,yt.debounce=ur,yt.defaults=qt,yt.defer=ar,yt.delay=fr,yt.difference=jn,yt.filter=yn,yt.flatten=qn,yt.forEach=wn,yt.forIn=Ut,yt.forOwn=zt,yt.functions=Wt,yt.groupBy=En,yt.initial=Un,yt.intersection=zn,yt.invert=Vt,yt.invoke=Sn,yt.keys=Pt,yt.map=xn,yt.max=Tn,yt.memoize=lr,yt.merge=fn,yt.min=Nn,yt.omit=ln,yt.once=cr,yt.pairs=cn,yt.partial=hr,yt.partialRight=pr,yt.pick=hn,yt.pluck=Cn,yt.range=Vn,yt.reject=An,yt.rest=$n,yt.shuffle=On,yt.sortBy=Dn,yt.tap=kr,yt.throttle=dr,yt.times=Tr,yt.toArray=Pn,yt.union=Kn,yt.uniq=Qn,yt.unzip=Gn,yt.values=pn,yt.where=Hn,yt.without=Yn,yt.wrap=vr,yt.zip=Zn,yt.zipObject=er,yt.collect=xn,yt.drop=$n,yt.each=wn,yt.extend=jt,yt.methods=Wt,yt.object=er,yt.select=yn,yt.tail=$n,yt.unique=Qn,yr(yt),yt.clone=Ft,yt.cloneDeep=It,yt.contains=vn,yt.escape=mr,yt.every=gn,yt.find=bn,yt.findIndex=Fn,yt.findKey=Rt,yt.has=Xt,yt.identity=gr,yt.indexOf=Rn,yt.isArguments=Mt,yt.isArray=_t,yt.isBoolean=$t,yt.isDate=Jt,yt.isElement=Kt,yt.isEmpty=Qt,yt.isEqual=Gt,yt.isFinite=Yt,yt.isFunction=Zt,yt.isNaN=tn,yt.isNull=nn,yt.isNumber=rn,yt.isObject=en,yt.isPlainObject=sn,yt.isRegExp=on,yt.isString=un,yt.isUndefined=an,yt.lastIndexOf=Xn,yt.mixin=yr,yt.noConflict=br,yt.parseInt=wr,yt.random=Er,yt.reduce=kn,yt.reduceRight=Ln,yt.result=Sr,yt.runInContext=H,yt.size=Mn,yt.some=_n,yt.sortedIndex=Jn,yt.template=xr,yt.unescape=Nr,yt.uniqueId=Cr,yt.all=gn,yt.any=_n,yt.detect=bn,yt.foldl=kn,yt.foldr=Ln,yt.include=vn,yt.inject=kn,zt(yt,function(e,t){yt.prototype[t]||(yt.prototype[t]=function(){var t=[this.__wrapped__];return tt.apply(t,arguments),e.apply(yt,t)})}),yt.first=In,yt.last=Wn,yt.take=In,yt.head=In,zt(yt,function(e,t){yt.prototype[t]||(yt.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==null||n&&typeof t!="function"?r:new Ct(r)})}),yt.VERSION="1.2.1",yt.prototype.toString=Lr,yt.prototype.value=Ar,yt.prototype.valueOf=Ar,wn(["join","pop","shift"],function(e){var t=X[e];yt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),wn(["push","reverse","sort","unshift"],function(e){var t=X[e];yt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),wn(["concat","slice","splice"],function(e){var t=X[e];yt.prototype[e]=function(){return new Ct(t.apply(this.__wrapped__,arguments))}}),yt}var t,n=typeof exports=="object"&&exports,r=typeof module=="object"&&module&&module.exports==n&&module,i=typeof global=="object"&&global;if(i.global===i||i.window===i)e=i;var s=0,o={},u=+(new Date)+"",a=200,f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/\w*$/,v=/<%=([\s\S]+?)%>/g,m=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",g=RegExp("^["+m+"]*0+(?=.$)"),y=/($^)/,b=/[&<>"']/g,w=/['\n\r\t\u2028\u2029\\]/g,E=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],S=0,x="[object Arguments]",T="[object Array]",N="[object Boolean]",C="[object Date]",k="[object Function]",L="[object Number]",A="[object Object]",O="[object RegExp]",M="[object String]",_={};_[k]=!1,_[x]=_[T]=_[N]=_[C]=_[L]=_[A]=_[O]=_[M]=!0;var D={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},P={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},B=H();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=B,define("lo-dash",[],function(){return B})):n&&!n.nodeType?r?(r.exports=B)._=B:n._=B:e._=B})(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["lo-dash","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(){var e="/socket.io/socket.io.js";define("app",[e,"lo-dash","backbone"],function(e,t,n){var r={};return r.dependencies={},r.modules=[],r.set=function(e,t){r.dependencies[e]=t},r.get=function(e){if(e in r.dependencies)return r.dependencies[e];for(var t=0;t<r.modules.length;t++)if(r.modules[t].name&&r.modules[t].name===e)return r.modules[t]},r.loadModules=function(e,n){e=t.map(e,function(e){return"./modules/"+e}),require(e,function(){t.each(arguments,function(e){r.modules.push(e),n(e)})})},r.isUrl=function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)},r.set("io",e),r.set("socket",e.connect("/")),r.set("_",t),r.set("backbone",n),r.set("user",window.user),t.extend(r,n.Events),r.set("events",t.extend({},n.Events)),r})}(),function(){var root=this,exports={},jade=function(e){function t(e){return e!=null}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),e.merge=function(n,r){var i=n["class"],s=r["class"];if(i||s)i=i||[],s=s||[],Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]),i=i.filter(t),s=s.filter(t),n["class"]=i.concat(s).join(" ");for(var o in r)o!="class"&&(n[o]=r[o]);return n},e.attrs=function(n,r){var i=[],s=n.terse;delete n.terse;var o=Object.keys(n),u=o.length;if(u){i.push("");for(var a=0;a<u;++a){var f=o[a],l=n[f];"boolean"==typeof l||null==l?l&&(s?i.push(f):i.push(f+'="'+f+'"')):0==f.indexOf("data")&&"string"!=typeof l?i.push(f+"='"+JSON.stringify(l)+"'"):"class"==f&&Array.isArray(l)?i.push(f+'="'+e.escape(l.join(" "))+'"'):r&&r[f]?i.push(f+'="'+e.escape(l)+'"'):i.push(f+'="'+l+'"')}}return i.join(" ")},e.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(t,n,r){if(!n)throw t;var i=3,s=require("fs").readFileSync(n,"utf8"),o=s.split("\n"),u=Math.max(r-i,0),a=Math.min(o.length,r+i),i=o.slice(u,a).map(function(e,t){var n=t+u+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+r+"\n"+i+"\n\n"+t.message,t},e}({});exports.board={},exports.link={},exports.user={},exports.board.boardListItem=function anonymous(locals){var buf=[];with(locals||{}){buf.push("<a"+jade.attrs({href:"/boards/show/"+board._id+""},{href:!0})+'><div class="content"><h3>'+jade.escape(null==(jade.interp=board.subject)?"":jade.interp)+"<small>, by "+((jade.interp=board._owner.name)==null?"":jade.interp)+'</small></h3><div class="preview">'),board._links=board._links.reverse();var count=0;(function(){var e=board._links;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){var r=e[t];r&&r.image&&!r.image.error&&count<4&&(count+=1,buf.push("<img"+jade.attrs({src:cloudinary.url(r.image.public_id+"."+r.image.format,{width:180,height:150,crop:"fill",version:r.image.version})},{src:!0})+"/>"))}else{var n=0;for(var t in e){n++;if(e.hasOwnProperty(t)){var r=e[t];r&&r.image&&!r.image.error&&count<4&&(count+=1,buf.push("<img"+jade.attrs({src:cloudinary.url(r.image.public_id+"."+r.image.format,{width:180,height:150,crop:"fill",version:r.image.version})},{src:!0})+"/>"))}}}}).call(this),buf.push("</div></div></a>")}return buf.join("")},exports.board.creationForm=function anonymous(locals){var buf=[];with(locals||{})buf.push('<form action="/boards" method="POST"><input type="hidden" value="{!board.id}"/><div class="large-9 small-9 columns"><input type="text" name="subject" placeholder="what should this board be about?"/></div><div class="large-3 small-3 columns"><button type="submit" class="postfix">create</button></div></form>');return buf.join("")},exports.board.linkAddForm=function anonymous(locals){var buf=[];with(locals||{})buf.push("<form"+jade.attrs({action:"/boards/"+board._id+"/links",method:"POST","class":"addLinkToBoard clearfix"},{action:!0,method:!0})+'><div class="large-9 small-9 columns"><input type="text" name="url" placeholder="paste or write URL of link to add"/></div><div class="large-3 small-3 columns"><button type="submit" class="postfix">add</button></div></form>');return buf.join("")},exports.link.article=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="content">'),link.preview.content&&buf.push(""+((jade.interp=link.preview.content)==null?"":jade.interp)+""),buf.push("</div>");return buf.join("")},exports.link.creationForm=function anonymous(locals){var buf=[];with(locals||{})buf.push('<form action="/links" method="POST"><div class="large-9 small-9 columns"><input type="text" name="url" placeholder="paste or write the URL"/></div><div class="large-3 small-3 columns"><button type="submit" class="postfix">go</button></div></form>');return buf.join("")},exports.link.images=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="images">'),link.preview.images&&link.preview.images.length&&function(){var e=link.preview.images;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){var r=e[t];buf.push("<img"+jade.attrs({src:r.url},{src:!0})+"/>")}else{var n=0;for(var t in e){n++;if(e.hasOwnProperty(t)){var r=e[t];buf.push("<img"+jade.attrs({src:r.url},{src:!0})+"/>")}}}}.call(this),buf.push("</div>");return buf.join("")},exports.link.linkBoardItem=function anonymous(locals){var buf=[];with(locals||{}){var tweets,media,images,content;tweets=link._tweets&&link._tweets.length||null,media=link.preview&&link.preview.media?link.preview.media.type:null,images=link.preview&&link.preview.images?link.preview.images.length:null,content=link.preview&&link.preview.content?link.preview.content.length:null;var details=[];tweets&&details.push("tweets"),media&&details.push("embedded media"),images&&details.push("images"),content&&details.push("article preview");var infoString=details.join(", "),extraClasses=extraClasses||"";buf.push("<article"+jade.attrs({id:link._id,"data-json":""+JSON.stringify(link)+"","class":"link-item"},{"class":!0,id:!0,"data-json":!0})+'><div class="content"><ul class="meta"><li class="meta-li"><a class="meta-link tweets text-hide">'),tweets?buf.push('<i class="meta-icon icon-twitter"></i>'):buf.push('<i class="meta-icon inactive icon-twitter"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link media text-hide">'),media?buf.push('<i class="meta-icon icon-play"></i>'):buf.push('<i class="meta-icon inactive icon-play"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link images text-hide">'),images?buf.push('<i class="meta-icon icon-images"></i>'):buf.push('<i class="meta-icon inactive icon-images"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link content text-hide">'),content?buf.push('<i class="meta-icon icon-type"></i>'):buf.push('<i class="meta-icon inactive icon-type"></i>'),buf.push('</a></li></ul><div class="preview">'),link.preview?(buf.push("<h4>"),link.preview.favicon_url&&buf.push("<img"+jade.attrs({src:link.preview.favicon_url},{src:!0})+"/>"),buf.push("<a"+jade.attrs({href:""+link.url+""},{href:!0})+">"+((jade.interp=link.preview.title||link.preview.url)==null?"":jade.interp)+"</a></h4><p>"+((jade.interp=link.preview.description)==null?"":jade.interp)+"</p>"),link.preview.media&&buf.push('<div class="flex-video">'+((jade.interp=link.preview.media.html)==null?"":jade.interp)+"</div>")):buf.push("<h4>"+jade.escape(null==(jade.interp=link.url)?"":jade.interp)+"</h4><p>fetching preview, please wait</p>"),buf.push("</div><a"+jade.attrs({href:"/links/"+link._id+"","class":"button secondary"},{href:!0})+">more info - "+jade.escape((jade.interp=infoString)==null?"":jade.interp)+"</a></div></article>")}return buf.join("")},exports.link.linkListItem=function anonymous(locals){var buf=[];with(locals||{})buf.push("<li"+jade.attrs({id:link._id,"class":"link-item"},{"class":!0,id:!0})+">"),link.preview&&link.preview.title?buf.push("<a"+jade.attrs({href:"/links/"+link._id+""},{href:!0})+">"+((jade.interp=link.preview.title)==null?"":jade.interp)+"</a>"):buf.push("<a"+jade.attrs({href:"/links/"+link._id+""},{href:!0})+">"+((jade.interp=link.url)==null?"":jade.interp)+"</a>"),buf.push("</li>");return buf.join("")},exports.link.media=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="media">'),link.preview.media&&link.preview.media.type&&buf.push(""+((jade.interp=link.preview.media)==null?"":jade.interp)+""),buf.push("</div>");return buf.join("")},exports.link.meta=function anonymous(locals){var buf=[];with(locals||{})buf.push('<ul class="meta"><li class="meta-li"><a class="meta-link tweets text-hide">'),tweets?buf.push('<i class="meta-icon icon-twitter"></i>'):buf.push('<i class="meta-icon inactive icon-twitter"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link media text-hide">'),media?buf.push('<i class="meta-icon icon-play"></i>'):buf.push('<i class="meta-icon inactive icon-play"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link images text-hide">'),images?buf.push('<i class="meta-icon icon-images"></i>'):buf.push('<i class="meta-icon inactive icon-images"></i>'),buf.push('</a></li><li class="meta-li"><a class="meta-link content text-hide">'),content?buf.push('<i class="meta-icon icon-type"></i>'):buf.push('<i class="meta-icon inactive icon-type"></i>'),buf.push("</a></li></ul>");return buf.join("")},exports.link.pagination=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="clear pagination"><a'+jade.attrs({href:data.prev_page},{href:!0})+">prev</a><a"+jade.attrs({href:data.next_page},{href:!0})+">next</a></div>");return buf.join("")},exports.link.searchForm=function anonymous(locals){var buf=[];with(locals||{})buf.push('<form action="/search" method="GET"><div class="large-9 small-9 columns"><input type="text" name="q" placeholder="enter a keyword and search for links"/></div><div class="large-3 small-3 columns"><button type="submit" class="postfix">find</button></div></form>');return buf.join("")},exports.link.tweet=function anonymous(locals){var buf=[];with(locals||{})buf.push('<li class="tweet"><img'+jade.attrs({src:tweet.profile_image_url},{src:!0})+"/><h5>"+jade.escape(null==(jade.interp=tweet.from_user_name)?"":jade.interp)+"</h5><p>"+jade.escape(null==(jade.interp=tweet.text)?"":jade.interp)+"</p></li>");return buf.join("")},exports.link.tweets=function anonymous(locals){var buf=[];with(locals||{})buf.push('<ul class="tweets">'),function(){var e=link._tweets;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){var r=e[t];buf.push('<li class="tweet"><img'+jade.attrs({src:r.profile_image_url},{src:!0})+"/><h5>"+jade.escape(null==(jade.interp=r.from_user_name)?"":jade.interp)+"</h5><p>"+jade.escape(null==(jade.interp=r.text)?"":jade.interp)+"</p></li>")}else{var n=0;for(var t in e){n++;if(e.hasOwnProperty(t)){var r=e[t];buf.push('<li class="tweet"><img'+jade.attrs({src:r.profile_image_url},{src:!0})+"/><h5>"+jade.escape(null==(jade.interp=r.from_user_name)?"":jade.interp)+"</h5><p>"+jade.escape(null==(jade.interp=r.text)?"":jade.interp)+"</p></li>")}}}}.call(this),buf.push("</ul>");return buf.join("")},typeof module!="undefined"?module.exports=exports:typeof define=="function"&&define.amd?define("templates",exports):root.templatizer=exports}();var libFuncName=null;if(typeof jQuery=="undefined"&&typeof Zepto=="undefined"&&typeof $=="function")libFuncName=$;else if(typeof jQuery=="function")libFuncName=jQuery;else{if(typeof Zepto!="function")throw new TypeError;libFuncName=Zepto}(function(e,t,n,r){Array.prototype.filter||(Array.prototype.filter=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")return;var r=[],i=arguments[1];for(var s=0;s<n;s++)if(s in t){var o=t[s];e&&e.call(i,o,s,t)&&r.push(o)}return r}),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),e.fn.stop=e.fn.stop||function(){return this},t.Foundation={name:"Foundation",version:"4.1.5",cache:{},init:function(t,n,r,i,s,o){var u,a=[t,r,i,s],f=[],o=o||!1;o&&(this.nc=o),this.rtl=/rtl/i.test(e("html").attr("dir")),this.scope=t||this.scope;if(n&&typeof n=="string"){if(/off/i.test(n))return this.off();u=n.split(" ");if(u.length>0)for(var l=u.length-1;l>=0;l--)f.push(this.init_lib(u[l],a))}else for(var c in this.libs)f.push(this.init_lib(c,a));return typeof n=="function"&&a.unshift(n),this.response_obj(f,a)},response_obj:function(e,t){for(var n=0,r=t.length;n<r;n++)if(typeof t[n]=="function")return t[n]({errors:e.filter(function(e){if(typeof e=="string")return e})});return e},init_lib:function(e,t){return this.trap(function(){if(this.libs.hasOwnProperty(e))return this.patch(this.libs[e]),this.libs[e].init.apply(this.libs[e],t)}.bind(this),e)},trap:function(e,t){if(!this.nc)try{return e()}catch(n){return this.error({name:t,message:"could not be initialized",more:n.name+" "+n.message})}return e()},patch:function(e){this.fix_outer(e),e.scope=this.scope,e.rtl=this.rtl},inherit:function(e,t){var n=t.split(" ");for(var r=n.length-1;r>=0;r--)this.lib_methods.hasOwnProperty(n[r])&&(this.libs[e.name][n[r]]=this.lib_methods[n[r]])},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));var n="";for(var r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n},libs:{},lib_methods:{set_data:function(e,t){var n=[this.name,+(new Date),Foundation.random_str(5)].join("-");return Foundation.cache[n]=t,e.attr("data-"+this.name+"-id",n),t},get_data:function(e){return Foundation.cache[e.attr("data-"+this.name+"-id")]},remove_data:function(t){t?(delete Foundation.cache[t.attr("data-"+this.name+"-id")],t.attr("data-"+this.name+"-id","")):e("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[e(this).attr("data-"+this.name+"-id")],e(this).attr("data-"+this.name+"-id","")})},throttle:function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}},data_options:function(t){function u(e){return!isNaN(e-0)&&e!==null&&e!==""&&e!==!1&&e!==!0}function a(t){return typeof t=="string"?e.trim(t):t}var n={},r,i,s=(t.attr("data-options")||":").split(";"),o=s.length;for(r=o-1;r>=0;r--)i=s[r].split(":"),/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),u(i[1])&&(i[1]=parseInt(i[1],10)),i.length===2&&i[0].length>0&&(n[a(i[0])]=a(i[1]));return n},delay:function(e,t){return setTimeout(e,t)},scrollTo:function(n,r,i){if(i<0)return;var s=r-e(t).scrollTop(),o=s/i*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(o,10))||(t.scrollTo(0,e(t).scrollTop()+o),this.scrollTo(n,r,i-10))}.bind(this),10)},scrollLeft:function(e){if(!e.length)return;return"scrollLeft"in e[0]?e[0].scrollLeft:e[0].pageXOffset},empty:function(e){if(e.length&&e.length>0)return!1;if(e.length&&e.length===0)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}},fix_outer:function(e){e.outerHeight=function(e,t){return typeof Zepto=="function"?e.height():typeof t!="undefined"?e.outerHeight(t):e.outerHeight()},e.outerWidth=function(e){return typeof Zepto=="function"?e.width():typeof bool!="undefined"?e.outerWidth(bool):e.outerWidth()}},error:function(e){return e.name+" "+e.message+"; "+e.more},off:function(){return e(this.scope).off(".fndtn"),e(t).off(".fndtn"),!0},zj:function(){try{return Zepto}catch(e){return jQuery}}()},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}})(libFuncName,this,this.document),define("foundation",["jquery"],function(){}),function(e,t,n,r){Foundation.libs.topbar={name:"topbar",version:"4.1.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(n,r,i){var s=this;return typeof r=="object"&&e.extend(!0,this.settings,r),typeof r!="string"?(e(".top-bar").each(function(){s.settings.$w=e(t),s.settings.$topbar=e(this),s.settings.$section=s.settings.$topbar.find("section"),s.settings.$titlebar=s.settings.$topbar.children("ul").first(),s.settings.$topbar.data("index",0);var n=e("<div class='top-bar-js-breakpoint'/>").insertAfter(s.settings.$topbar);s.settings.breakPoint=n.width(),n.remove(),s.assemble(),s.settings.$topbar.parent().hasClass("fixed")&&e("body").css("padding-top",s.outerHeight(s.settings.$topbar))}),s.settings.init||this.events(),this.settings.init):this[r].call(this,i)},events:function(){var n=this,r=this.outerHeight(e(".top-bar"));e(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(i){var s=e(this).closest(".top-bar"),o=s.find("section, .section"),u=s.children("ul").first();s.data("height")||n.largestUL(),i.preventDefault(),n.breakpoint()&&s.toggleClass("expanded").css("min-height",""),s.hasClass("expanded")?s.parent().hasClass("fixed")&&(s.parent().removeClass("fixed"),s.addClass("fixed"),e("body").css("padding-top","0"),t.scrollTo(0,0)):(n.rtl?(o.css({right:"0%"}),o.find(">.name").css({right:"100%"})):(o.css({left:"0%"}),o.find(">.name").css({left:"100%"})),o.find("li.moved").removeClass("moved"),s.data("index",0),s.hasClass("fixed")&&(s.parent().addClass("fixed"),s.removeClass("fixed"),e("body").css("padding-top",r)))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(t){var r=e(this).closest(".top-bar"),i=r.find("section, .section"),s=r.children("ul").first(),o=e(this).next(".dropdown").outerHeight();(Modernizr.touch||n.breakpoint())&&t.preventDefault();if(n.breakpoint()){var u=e(this),a=u.closest("li");r.data("index",r.data("index")+1),a.addClass("moved"),n.rtl?(i.css({right:-(100*r.data("index"))+"%"}),i.find(">.name").css({right:100*r.data("index")+"%"})):(i.css({left:-(100*r.data("index"))+"%"}),i.find(">.name").css({left:100*r.data("index")+"%"})),e(".top-bar").css("min-height",o),u.siblings("ul").height(r.data("height")+n.outerHeight(s,!0)),r.css("min-height",r.data("height")+n.outerHeight(s,!0)*2)}}),e(t).on("resize.fndtn.topbar",function(){n.breakpoint()||e(".top-bar").css("min-height","").removeClass("expanded")}.bind(this)),e(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(t){t.preventDefault();var r=e(this),i=r.closest(".top-bar"),s=i.find("section, .section"),o=r.closest("li.moved"),u=o.parent();i.data("index",i.data("index")-1),n.rtl?(s.css({right:-(100*i.data("index"))+"%"}),s.find(">.name").css({right:100*i.data("index")+"%"})):(s.css({left:-(100*i.data("index"))+"%"}),s.find(">.name").css({left:100*i.data("index")+"%"})),i.data("index")===0&&i.css("min-height",0),setTimeout(function(){o.removeClass("moved")},300)})},breakpoint:function(){return e(t).width()<=this.settings.breakPoint||e("html").hasClass("lt-ie9")},assemble:function(){var t=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var n=e(this),r=n.siblings(".dropdown"),i=e('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');t.settings.custom_back_text==1?i.find("h5>a").html("&laquo; "+t.settings.back_text):i.find("h5>a").html("&laquo; "+n.html()),r.prepend(i)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var t=this.settings.$topbar.find("section ul ul"),n=t.first(),r=0,i=this;t.each(function(){e(this).children("li").length>n.children("li").length&&(n=e(this))}),n.children("li").each(function(){r+=i.outerHeight(e(this),!0)}),this.settings.$topbar.data("height",r)},sticky:function(){var n="."+this.settings.stickyClass;if(e(n).length>0){var r=e(n).length?e(n).offset().top:0,i=e(t),s=this.outerHeight(e(".top-bar"));i.scroll(function(){i.scrollTop()>=r?(e(n).addClass("fixed"),e("body").css("padding-top",s)):i.scrollTop()<r&&(e(n).removeClass("fixed"),e("body").css("padding-top","0"))})}},off:function(){e(this.scope).off(".fndtn.topbar"),e(t).off(".fndtn.topbar")}}}(Foundation.zj,this,this.document),define("topbar",["foundation"],function(){}),function(){define("ui",["jquery","lo-dash","./templates","topbar"],function(e,t,n){e(document).foundation();var r={};return r.$=e,r.templates=n,r.getModules=function(){var n=t.map(e("[data-module]"),function(t){return e(t).attr("data-module")});return n},r})}(),function(){require.config({baseUrl:"/js",paths:{jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min",foundation:"./vendors/foundation",topbar:"./vendors/foundation.topbar","lo-dash":"./vendors/lo-dash",backbone:"./vendors/backbone","backbone.paginator":"./vendors/backbone.paginator",masonry:"./vendors/jquery.masonry",imagesLoaded:"./vendors/jquery.imagesLoaded",app:"./app",ui:"./ui"},shim:{topbar:{deps:["foundation"]},foundation:{deps:["jquery"]},backbone:{deps:["lo-dash","jquery"],exports:"Backbone"},"backbone.paginator":{deps:["backbone"],exports:"Backbone.Paginator"}}}),require(["app","ui"],function(e,t){window.app=e,window.ui=t,e.loadModules(t.getModules(),function(n){n.init.call(n,e,t)})})}(),define("main",function(){});